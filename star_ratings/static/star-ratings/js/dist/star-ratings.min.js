!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;(e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).starRatings=t()}}(function(){return(function t(e,n,r){function s(i,o){if(!n[i]){if(!e[i]){var u="function"==typeof require&&require;if(!o&&u)return u(i,!0);if(a)return a(i,!0);var l=Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[i]={exports:{}};e[i][0].call(c.exports,function(t){var n;return s(e[i][1][t]||t)},c,c.exports,t,e,n,r)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)s(r[i]);return s})({1:[function(t,e,n){e.exports=t("./src/ratings")},{"./src/ratings":2}],2:[function(t,e,n){var r=t("./rest.js"),s=t("./utils");function a(t){t.addEventListener("submit",i),t.onmouseenter=function(){var t,e,n=(t=this,e=s.findParent(t,"star-ratings"),e?parseInt(e.getAttribute("data-max-rating")):-1),r=this.querySelector("[name=score]");r&&(s.findParent(this,"star-ratings").querySelector(".star-ratings-rating-foreground").style.width=100/n*r.value+"%")},t.addEventListener("click",function(){let e=20*parseInt(t.children[3].getAttribute("data-score")),n=s.findParent(this,"star-ratings");n.querySelector(".star-ratings-rating-foreground").style.width=e+"%",n.setAttribute("data-rated-at",e)}),t.onmouseleave=function(){var t=s.findParent(this,"star-ratings");let e=t.getAttribute("data-initial-rating");if(t.hasAttribute("data-rated-at")){let n=t.getAttribute("data-rated-at");t.querySelector(".star-ratings-rating-foreground").style.width=n+"%"}else t.querySelector(".star-ratings-rating-foreground").style.width=e+"%"}}function i(t){t.stopPropagation(),t.preventDefault();var e,n,a,i=t.target,u=[].reduce.call(i.elements,function(t,e){return t[e.name]=e.value,t},{});e=i.action,n=u,a=this,r.post(e,n,function(t){(function t(e,n){var r,a=s.findParent(n,"star-ratings");if(null!=a){a.getElementsByClassName("star-ratings-rating-foreground")[0].style.width=e.user_rating;var i=a.getElementsByClassName("star-ratings-rating-count")[0];i&&(r=i.getElementsByClassName("star-ratings-rating-value")[0])&&(r.innerHTML=e.count);var o=a.getElementsByClassName("star-ratings-rating-user")[0],u=a.getElementsByClassName("star-ratings-clear")[0];o&&(r=o.getElementsByClassName("star-ratings-rating-value")[0])&&(null==e.user_rating&&r.getAttribute("data-when-null",!1)?(e.user_rating=r.getAttribute("data-when-null"),u&&(u.classList.remove("star-ratings-clear-visible"),u.classList.add("star-ratings-clear-hidden"))):u&&(u.classList.remove("star-ratings-clear-hidden"),u.classList.add("star-ratings-clear-visible")),r.innerHTML=e.user_rating)}})(t,a),function t(e,n){n.dispatchEvent(o("rate-success",{sender:n,rating:e}))}(t,a)},function(t){var e,n,r;e=t,n=a,null!=(r=s.findParent(n,"star-ratings"))&&(r.querySelector(".star-ratings-errors").innerHTML=e.error,setTimeout(function(){r.querySelector(".star-ratings-errors").innerHTML=""},2500)),function t(e,n){n.dispatchEvent(o("rate-failed",{sender:n,error:e}))}(t,a)})}function o(t,e){if("undefined"!=typeof CustomEvent)return new CustomEvent(t,{detail:e,bubbles:!0,cancelable:!0});var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!0,!0,e),n}function u(t){var e=s.findParent(t,"star-ratings");return e?parseFloat(e.getAttribute("data-avg-rating")):-1}function l(t,e){t.classList.contains(e)?t.classList.remove(e):t.classList.add(e)}document.addEventListener("DOMContentLoaded",function(t){document.querySelector(".star-ratings")&&function t(){var e,n=document.querySelectorAll(".star-ratings-rate-action");for(e=0;e<n.length;e+=1)a(n[e])}()}),e.exports={bindRating:a}},{"./rest.js":3,"./utils":4}],3:[function(t,e,n){"use strict";e.exports={getCookie:function(t){var e,n,r,s=null;if(document.cookie&&""!==document.cookie){for(n=0,e=document.cookie.split(";");n<e.length;n+=1)if((r=e[n].trim()).substring(0,t.length+1)===t+"="){s=decodeURIComponent(r.substring(t.length+1));break}}return s},setCSRFToken:function(t){var e=this.getCookie("csrftoken");return null==e&&(e=document.querySelector("[name=csrfmiddlewaretoken]").value),t.setRequestHeader("X-CSRFToken",e),t},makeRequest:function(t,e,n,r){var s=new XMLHttpRequest;return void 0!==s.overrideMimeType&&s.overrideMimeType("application/json"),s.open(e,t,!0),s.setRequestHeader("Content-Type","application/json"),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.onreadystatechange=function(){4===s.readyState&&(s.status>=200&&s.status<=299?n&&(s.responseText?n(JSON.parse(s.responseText)):n()):r&&r(JSON.parse(s.responseText)))},s},get:function(t,e,n,r){this.makeRequest(t,"GET",n,r).send(JSON.stringify(e))},post:function(t,e,n,r){var s=this.makeRequest(t,"POST",n,r);(s=this.setCSRFToken(s)).send(JSON.stringify(e))},put:function(t,e,n,r){var s=this.makeRequest(t,"PUT",n,r);(s=this.setCSRFToken(s)).send(JSON.stringify(e))},patch:function(t,e,n,r){var s=this.makeRequest(t,"PATCH",n,r);(s=this.setCSRFToken(s)).send(JSON.stringify(e))},delete:function(t,e,n,r){var s=this.makeRequest(t,"DELETE",n,r);(s=this.setCSRFToken(s)).send(JSON.stringify(e))}}},{}],4:[function(t,e,n){function r(t,e){return(" "+t.className+" ").indexOf(" "+e+" ")>-1}e.exports={hasClass:r,findParent:function t(e,n){for(var s=e.parentNode;!1===r(s,n);){if(void 0===s.parentNode)return null;s=s.parentNode}return s}}},{}]},{},[1])(1)});